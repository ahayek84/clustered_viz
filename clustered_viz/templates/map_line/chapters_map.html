<!DOCTYPE html><!-- This site was created in Webflow. http://www.webflow.com --><!-- Last Published: Wed Aug 05 2020 15:35:25 GMT+0000 (Coordinated Universal Time) -->
<html data-wf-domain="a-hayeks-radical-project.webflow.io" data-wf-page="5f2ab600e18946fc18d42d9f"
      data-wf-site="5f2ab60095429e1f8cc00007" data-wf-status="1">
<head>
    <meta charset="utf-8"/>
    <title>A Hayek&#x27;s Radical Project</title>
    <meta content="width=device-width, initial-scale=1" name="viewport"/>
    <meta content="Webflow" name="generator"/>
    <link href="https://uploads-ssl.webflow.com/5f2ab60095429e1f8cc00007/css/a-hayeks-radical-project.webflow.7c0512d70.css"
          rel="stylesheet" type="text/css"/>
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
    <script type="text/javascript">WebFont.load({google: {families: ["Oswald:200,300,400,500,600,700"]}});</script>
    <!--[if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script>
    <![endif]-->
    <script type="text/javascript">!function (o, c) {
        var n = c.documentElement, t = " w-mod-";
        n.className += t + "js", ("ontouchstart" in o || o.DocumentTouch && c instanceof DocumentTouch) && (n.className += t + "touch")
    }(window, document);</script>
    <link href="https://uploads-ssl.webflow.com/img/favicon.ico" rel="shortcut icon" type="image/x-icon"/>
    <link href="https://uploads-ssl.webflow.com/img/webclip.png" rel="apple-touch-icon"/>
    <link href='https://uploads-ssl.webflow.com/5d88f370c5599e348fb22cbe/5d8b9e9b916e2bac8bac604b_mapbox_gl.txt'
          rel='stylesheet'/>

    <style>
        .mapboxgl-canvas {
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
        }

        .mapboxgl-canvas:focus {
            outline: none;
        }
    </style>
</head>
<body class="body">
<div class="page-wrap">
    <div id="map" class="map"></div>
    <div class="nav-wrap">
        <nav class="nav__inner-wrap"><a href="#chinatown" class="nav-item w-inline-block"></a><a href="#coit-tower"
                                                                                                 class="nav-item w-inline-block"></a><a
                href="#north-beach" class="nav-item w-inline-block"></a><a href="#fishermans-wharf"
                                                                           class="nav-item w-inline-block"></a><a
                href="#nob-hill" class="nav-item w-inline-block"></a><a href="#fairmont"
                                                                        class="nav-item w-inline-block"></a><a
                href="#ferry-building" class="nav-item w-inline-block"></a><a href="#market-street"
                                                                              class="nav-item w-inline-block"></a></nav>
    </div>
    <div id="features" class="features">
        <div class="intro-section"><h1 class="intro-title">Touring San Francisco</h1>
            <p class="intro__sub-title">Scroll Down To Explore</p></div>
        <div id="chinatown" class="section active">
            <div class="section__inner-wrap">
                <div class="bg"></div>
                <h1 class="heading"><span class="number">01</span> Chinatown</h1>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum
                    tristique. Duis cursus, mi quis viverra ornare, eros dolor interdum nulla, ut commodo diam libero
                    vitae erat. Aenean faucibus nibh et justo cursus id rutrum lorem imperdiet. Nunc ut sem vitae risus
                    tristique posuere.</p></div>
        </div>
        <div id="coit-tower" class="section">
            <div class="section__inner-wrap"><h1 class="heading"><span class="number">02</span> Coit Tower</h1>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum
                    tristique. Duis cursus, mi quis viverra ornare, eros dolor interdum nulla, ut commodo diam libero
                    vitae erat. Aenean faucibus nibh et justo cursus id rutrum lorem imperdiet. Nunc ut sem vitae risus
                    tristique posuere.</p></div>
        </div>
        <div id="north-beach" class="section">
            <div class="section__inner-wrap"><h1 class="heading"><span class="number">03</span> North Beach</h1>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum
                    tristique. Duis cursus, mi quis viverra ornare, eros dolor interdum nulla, ut commodo diam libero
                    vitae erat. Aenean faucibus nibh et justo cursus id rutrum lorem imperdiet. Nunc ut sem vitae risus
                    tristique posuere.</p></div>
        </div>
        <div id="fishermans-wharf" class="section">
            <div class="section__inner-wrap"><h1 class="heading"><span class="number">04</span> Fishermans Wharf</h1>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum
                    tristique. Duis cursus, mi quis viverra ornare, eros dolor interdum nulla, ut commodo diam libero
                    vitae erat. Aenean faucibus nibh et justo cursus id rutrum lorem imperdiet. Nunc ut sem vitae risus
                    tristique posuere.</p></div>
        </div>
        <div id="nob-hill" class="section">
            <div class="section__inner-wrap"><h1 class="heading"><span class="number">05</span> Nob Hill</h1>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum
                    tristique. Duis cursus, mi quis viverra ornare, eros dolor interdum nulla, ut commodo diam libero
                    vitae erat. Aenean faucibus nibh et justo cursus id rutrum lorem imperdiet. Nunc ut sem vitae risus
                    tristique posuere.</p></div>
        </div>
        <div id="fairmont" class="section">
            <div class="section__inner-wrap"><h1 class="heading"><span class="number">06</span> Fairmont</h1>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum
                    tristique. Duis cursus, mi quis viverra ornare, eros dolor interdum nulla, ut commodo diam libero
                    vitae erat. Aenean faucibus nibh et justo cursus id rutrum lorem imperdiet. Nunc ut sem vitae risus
                    tristique posuere.</p></div>
        </div>
        <div id="ferry-building" class="section">
            <div class="section__inner-wrap"><h1 class="heading"><span class="number">07</span> Ferry Building</h1>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum
                    tristique. Duis cursus, mi quis viverra ornare, eros dolor interdum nulla, ut commodo diam libero
                    vitae erat. Aenean faucibus nibh et justo cursus id rutrum lorem imperdiet. Nunc ut sem vitae risus
                    tristique posuere.</p></div>
        </div>
        <div id="market-street" class="section">
            <div class="section__inner-wrap"><h1 class="heading"><span class="number">08</span> Market Street</h1>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum
                    tristique. Duis cursus, mi quis viverra ornare, eros dolor interdum nulla, ut commodo diam libero
                    vitae erat. Aenean faucibus nibh et justo cursus id rutrum lorem imperdiet. Nunc ut sem vitae risus
                    tristique posuere.</p></div>
        </div>
        <div class="footer-wrap"></div>
    </div>
</div>
<script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.4.1.min.220afd743d.js?site=5f2ab60095429e1f8cc00007"
        type="text/javascript" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
        crossorigin="anonymous"></script>
<script src="https://uploads-ssl.webflow.com/5f2ab60095429e1f8cc00007/js/webflow.734a8f509.js"
        type="text/javascript"></script>
<!--[if lte IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script>
<![endif]-->
<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.3.1/mapbox-gl.js'></script>

<script>
    mapboxgl.accessToken = 'pk.eyJ1Ijoia25hZmVoIiwiYSI6ImNqMDk4OTh2ajAwMmQyd25yaWZndzY5c3MifQ.EQtUfQQ2gT2-AQ4InBgtOg';

    var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/light-v10',
        center: [34.35886, 31.40791],
        zoom: 9,
        pitch: 0,
        bearing: 0,
        container: 'map',
        antialias: true,
        interactive: false
    });
    /// constant


    var chapters = {
        'chinatown': {
            bearing: -17.6,
            center: [34.276977, 31.262664],
            zoom: 16.5,
            pitch: 45
        },
        'coit-tower': {
            duration: 5000,
            center: [34.258838, 31.288923],
            bearing: 27,
            zoom: 19.5,
            pitch: 90
        },
        'north-beach': {
            bearing: 27,
            duration: 5000,
            center: [34.362715, 31.315663],
            zoom: 19,
            pitch: 40
        },
        'fishermans-wharf': {
            bearing: 90,
            duration: 5000,
            center: [34.319729, 31.343305],
            zoom: 19
        },
        'nob-hill': {
            bearing: 27,
            duration: 5000,
            center: [34.349002, 31.3254],
            zoom: 18,
            pitch: 40,
        },
        'fairmont': {
            bearing: 90,
            duration: 5000,
            center: [34.423614, 31.452422],
            zoom: 19,
            pitch: 60
        },
        'ferry-building': {
            bearing: 120,
            duration: 5000,
            center: [34.381636, 31.403496],
            zoom: 18.3,
            pitch: 60
        },
        'market-street': {
            bearing: 90,
            duration: 5000,
            center: [34.358397, 31.421054],
            zoom: 18.3,
            pitch: 20
        }
    };


    // Create a GeoJSON source with an empty lineString.
    var geojson = {
        'type': 'FeatureCollection',
        'features': [
            {
                'type': 'Feature',
                'geometry': {
                    'type': 'LineString',
                    'coordinates': [[34.276977, 31.262664]] // first chapter center
                }
            }
        ]
    };

    // Create a GeoJSON source with an empty lineString.
    var mgeojson = {
        'type': 'FeatureCollection',
        'features': [
            {
                'type': 'Feature',
                'properties': {},
                'geometry': {
                    'type': 'Point',
                    'coordinates': [34.276977, 31.262664]
                }
            }
        ]
    };


    // The 'building' layer in the mapbox-streets vector source contains building-height
    // data from OpenStreetMap.
    map.on('load', function () {

        // Add an image to use as a custom marker
        map.loadImage(
            'https://docs.mapbox.com/mapbox-gl-js/assets/custom_marker.png',
            function (error, image) {
                if (error) throw error;
                map.addImage('custom-marker', image);
                // Add a GeoJSON source with 3 points.
                map.addSource('points', {
                    'type': 'geojson',
                    'data': mgeojson
                });

                // Add a symbol layer
                map.addLayer({
                    'id': 'symbols',
                    'type': 'symbol',
                    'source': 'points',
                    'layout': {
                        'icon-image': 'custom-marker'
                    }
                });
            }
        );

        map.addSource('line', {
            'type': 'geojson',
            'data': geojson
        });
        // add the line which will be modified in the animation
        map.addLayer({
            'id': 'line-animation',
            'type': 'line',
            'source': 'line',
            'layout': {
                'line-cap': 'round',
                'line-join': 'round'
            },
            'paint': {
                'line-color': 'blue',
                'line-width': 5,
                'line-opacity': 0.8
            }
        });
// Insert the layer beneath any symbol layer.
        var layers = map.getStyle().layers;

        var labelLayerId;
        for (var i = 0; i < layers.length; i++) {
            if (layers[i].type === 'symbol' && layers[i].layout['text-field']) {
                labelLayerId = layers[i].id;
                break;
            }
        }

        map.addLayer({
            'id': '3d-buildings',
            'source': 'composite',
            'source-layer': 'building',
            'filter': ['==', 'extrude', 'true'],
            'type': 'fill-extrusion',
            'minzoom': 15,
            'paint': {
                'fill-extrusion-color': '#aaa',

// use an 'interpolate' expression to add a smooth transition effect to the
// buildings as the user zooms in
                'fill-extrusion-height': [
                    "interpolate", ["linear"], ["zoom"],
                    15, 0,
                    15.05, ["get", "height"]
                ],
                'fill-extrusion-base': [
                    "interpolate", ["linear"], ["zoom"],
                    15, 0,
                    15.05, ["get", "min_height"]
                ],
                'fill-extrusion-opacity': .6
            }
        }, labelLayerId);
    });

    // end onload

    function animateLine(chaptername) {
        if (IsNameFirstInCoo(chapters, chaptername)) {
            geojson.features[0].geometry.coordinates = [];
            mgeojson.features[0].geometry.coordinates = [];

            mgeojson.features[0].geometry.coordinates = chapters[chaptername].center;
            map.getSource('points').setData(mgeojson);

        } else {
            geojson.features[0].geometry.coordinates.push(chapters[chaptername].center);
            mgeojson.features[0].geometry.coordinates = chapters[chaptername].center;
            // then update the map
            map.getSource('points').setData(mgeojson);
            map.getSource('line').setData(geojson);
        }
    }

    // On every scroll event, check which element is on screen
    window.onscroll = function () {
        var chapterNames = Object.keys(chapters);
        for (var i = 0; i < chapterNames.length; i++) {
            var chapterName = chapterNames[i];
            if (isElementOnScreen(chapterName)) {
                setActiveChapter(chapterName);
                break;
            }
        }
    };


    var activeChapterName = 'chinatown';

    function setActiveChapter(chapterName) {
        if (chapterName === activeChapterName) return;


        animateLine(chapterName);
        map.flyTo(chapters[chapterName]);

        document.getElementById(chapterName).setAttribute('class', 'active');
        document.getElementById(activeChapterName).setAttribute('class', '');

        activeChapterName = chapterName;
    }

    function isElementOnScreen(id) {
        var element = document.getElementById(id);
        var bounds = element.getBoundingClientRect();
        return bounds.top < window.innerHeight && bounds.bottom > 300;
    }

    function IsNameFirstInCoo(chap, nam) {
        var coo = false;
        for (cha in chap) {
            if (cha == nam) {
                coo = true;
            }
            else {
                break;
            }
        }
        return coo
    }


</script>
</body>
</html>
